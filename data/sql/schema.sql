CREATE TABLE clients (id BIGSERIAL, name VARCHAR(255) NOT NULL, address VARCHAR(255), nip VARCHAR(31), regon VARCHAR(15), email VARCHAR(127) NOT NULL, tel VARCHAR(63), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE configs (id BIGSERIAL, name VARCHAR(255) NOT NULL, value VARCHAR(4095), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE contracts (id BIGSERIAL, name VARCHAR(255), client_id BIGINT NOT NULL, product_id BIGINT NOT NULL, prize FLOAT, month BIGINT NOT NULL, date_from DATE, date_to DATE, remind_pay BOOLEAN, remind_end BOOLEAN, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE product (id BIGSERIAL, name VARCHAR(255) NOT NULL, description VARCHAR(4095), prize FLOAT, regon VARCHAR(15), month BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE users (id BIGSERIAL, login VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, name VARCHAR(255), email VARCHAR(127) NOT NULL, type VARCHAR(32) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
ALTER TABLE contracts ADD CONSTRAINT contracts_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE contracts ADD CONSTRAINT contracts_client_id_clients_id FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
